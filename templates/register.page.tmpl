{{template "base" .}}

{{define "css"}}
<style>
    /* Add custom CSS for styling */
    body {
        background-image: url("/static/images/img1.jpg"); /* Path to your background image */
        background-size: cover;
    }

    .overlay {
        background-color: rgba(255, 255, 255, 0.5); /* Semi-transparent white overlay */
        backdrop-filter: blur(5px); /* Apply a blur effect to the overlay */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .container-fluid {
        height: 100vh; /* Make the container fill the viewport height */
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .content-container {
        background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white background for the form */
        border-radius: 10px;
        padding: 20px;
    }

    h2 {
        color: #007bff; /* Set a primary color for headings */
    }

    /* Style form fields */
    .form-control {
        margin-bottom: 10px;
    }

    /* Style the Register button */
    .btn-primary {
        background-color: #17a2b8; /* Change the button color */
        border-color: #17a2b8;
        display: block;
        margin: 0 auto; /* Center-align the button */
    }

    .btn-primary:hover {
        background-color: #117a8b; /* Darker shade on hover */
    }

    /* Style success and error alerts */
    .alert-success {
        background-color: #d4edda; /* Green background for success */
        border-color: #c3e6cb;
        color: #155724;
    }

    .alert-danger {
        background-color: #f8d7da; /* Red background for error */
        border-color: #f5c6cb;
        color: #721c24;
    }
</style>
{{end}}

{{define "content"}}
<div class="overlay"></div>
<div class="container-fluid">
    <div class="content-container col-5">
        <h2 class="text-center">Register User</h2>
        <form id="registrationForm" method="post" action="/auth/register">
            <!-- Your form fields remain unchanged -->
            <div class="form-group">
                <input type="text" class="form-control" id="firstName" name="firstName" required
                    placeholder="First Name">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" id="lastName" name="lastName" required
                    placeholder="Last Name">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" id="phone" name="phone" required
                    placeholder="Phone">
            </div>
            <div class="form-group">
                <input type="email" class="form-control" id="email" name="email" required
                    placeholder="Email">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="password" name="password" required
                    placeholder="Password">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                    required placeholder="Confirm Password">
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
    </div>
</div>
<div id="registrationAlert" class="alert alert-success mt-3" style="display: none;">
    Account created successfully!
</div>
<div id="errorAlert" class="alert alert-danger mt-3" style="display: none;">
    Failed to create an account. Please check your information.
</div>
{{end}}


{{define "js"}}
<script>
    $(document).ready(function () {
        $("#registrationForm").submit(function (e) {
            e.preventDefault();

            // Serialize the form data
            const formData = $(this).serialize();

            // Send a POST request to the backend
            $.ajax({
                type: "POST",
                url: "/auth/register",
                data: formData,
                dataType: "json", // Expect JSON response
                success: function (response) {
                    if (response.message === "User created successfully") {
                        // Hide the form and show the success alert
                        $("#registrationForm").hide();
                        $("#registrationAlert").show(); // Show the success alert
                    } else {
                        // Show the error message
                        $("#errorAlert").text("Failed to create an account. " + response.error).show();
                    }
                },
                error: function (error) {
                    // Handle AJAX errors, if any
                    console.error("Error:", error);
                }
            });
        });
    });
</script>
{{end}}
